# demo-project-JPA-





-- 회사 정보 테이블
CREATE TABLE COMPANY (
    comp_id INT AUTO_INCREMENT PRIMARY KEY,         -- 회사 고유 아이디
    comp_nm VARCHAR(100) NOT NULL,                  -- 회사 이름
    comp_status INT DEFAULT 0                       -- 회사 상태 ( 0:사용중 / 1:삭제 )
)

-- 부서 정보 테이블
CREATE TABLE DEPARTMENT (
    comp_id INT NOT NULL,                           -- 소속 회사 아이디
    dept_id INT NOT NULL,                           -- 부서 고유 아이디
    dept_nm VARCHAR(100) NOT NULL,                  -- 부서 이름
    dept_status INT DEFAULT 0,                      -- 부서 상태 ( 0:사용중 / 1:삭제 )
    PRIMARY KEY (comp_id, dept_id),
    FOREIGN KEY (comp_id) REFERENCES COMPANY(comp_id)
)

-- 직급 정보 테이블
CREATE TABLE RANKS (
    comp_id INT NOT NULL,                           -- 소속 회사 아이디
    rank_id INT NOT NULL,                           -- 직급 고유 아이디
    rank_nm VARCHAR(100) NOT NULL,                  -- 직급 이름
    rank_level INT NOT NULL,                        -- 직급 레벨 ( 0:사원 / 1:주임 등등 )
    rank_status INT DEFAULT 0,                      -- 직급 상태 ( 0:사용중 / 1:삭제 )
    PRIMARY KEY (comp_id, rank_id),
    FOREIGN KEY (comp_id) REFERENCES COMPANY(comp_id)
)


-- 유저 정보 테이블
CREATE TABLE USERS (
    comp_id INT NOT NULL,                           -- 사용자 소속 회사
    dept_id INT NOT NULL,                           -- 사용자 소속 부서
    user_id INT AUTO_INCREMENT PRIMARY KEY,         -- 사용자 아이디
    user_nm VARCHAR(100) NOT NULL,                  -- 사용자 이름
    user_pw VARCHAR(255) NOT NULL,                  -- 사용자 비밀번호
    rank_id INT NOT NULL,                           -- 사용자 직급
    user_email VARCHAR(100) NOT NULL,               -- 사용자 이메일
    user_dt DATETIME DEFAULT CURRENT_TIMESTAMP,     -- 사용자 가입일
    user_role INT DEFAULT 0,                        -- 사용자 권한 ( 0:일반사용자 / 1:관리자 )
    user_status INT DEFAULT 0                       -- 사용자 재직상태 ( 0:재직 / 1:휴직 / 2:퇴직 )
)

-- 문서 양식 정보 테이블
CREATE TABLE TEMPLATES (
    comp_id INT NOT NULL,                           -- 양식 소속 회사
    dept_id INT NOT NULL,                           -- 양식 소속 부서
    tem_id INT AUTO_INCREMENT PRIMARY KEY,          -- 양식 아이디
    tem_nm VARCHAR(100) NOT NULL,                   -- 양식 이름
    tem_description TEXT,                           -- 양식 설명
    tem_contents TEXT NOT NULL,                     -- 양식 내용
    tem_status INT NOT NULL,                        -- 양식 상태 ( 0:사용중 / 1:삭제 )
    create_id INT NOT NULL,                         -- 양식 생성자 아이디
    create_comp_id INT NOT NULL,                    -- 양식 생성자 소속 회사
    create_dept_id INT NOT NULL,                    -- 양식 생성자 소속 부서
    create_dt DATETIME DEFAULT CURRENT_TIMESTAMP,    -- 양식 생성일
    update_id INT,                         -- 양식 수정자 아이디
    update_comp_id INT,                    -- 양식 수정자 소속 회사
    update_dept_id INT,                    -- 양식 수정자 소속 부서
    update_dt DATETIME                              -- 양식 수정일
)



-- 문서 정보 테이블
CREATE TABLE DOCUMENTS (
    comp_id INT NOT NULL,                           -- 문서 소속 회사
    dept_id INT NOT NULL,                           -- 문서 소속 부서
    create_id INT NOT NULL,                         -- 문서 생성자 아이디
    create_comp_id INT NOT NULL,                    -- 문서 생성자 소속 회사
    create_dept_id INT NOT NULL,                    -- 문서 생성자 소속 부서
    doc_id VARCHAR(10) NOT NULL PRIMARY KEY,        -- 문서 고유 아이디 - '올해년도 + 시퀀스' 형태 ( ex 2025000001 총 10자리)
    doc_title VARCHAR(255) NOT NULL,                -- 문서 제목
    doc_contents TEXT NOT NULL,                     -- 문서 내용
    doc_status INT NOT NULL,                        -- 문서 결재 상태 ( 000:임시저장 / 100:결재중 / 200:결재완료 / 400:결재반려 / 800:문서삭제 )
    create_dt DATETIME DEFAULT CURRENT_TIMESTAMP,   -- 문서 생성일
    doc_secret INT DEFAULT 0                        -- 보안문서 여부 ( 0:일반문서 / 1:보안문서 )
)

-- 문서 결재라인 테이블
CREATE TABLE SIGNLINE (
    sign_id INT AUTO_INCREMENT PRIMARY KEY,         -- 결재 고유 아이디
    doc_id VARCHAR(10) NOT NULL,                    -- 결재 문서 아이디
    comp_id INT NOT NULL,                           -- 결재자 회사
    dept_id INT NOT NULL,                           -- 결재자 부서서
    user_id INT NOT NULL,                           -- 결재자 아이디
    sign_no INT NOT NULL,                           -- 결재 순서
    sign_status INT DEFAULT 000,                    -- 결재 상태 ( 000:결재대기 / 100:결재중 / 200:결재완료 / 400:결재반려 )
    sign_dt DATETIME NULL,                          -- 결재 시간 ( NULL이면 미결재 )
    FOREIGN KEY (doc_id) REFERENCES DOCUMENTS(doc_id)
)



INSERT INTO company ( comp_id, comp_nm, comp_status ) VALUES 
  (1000, '데모회사', 0),
  (2000, '네이버', 0),
  (3000, '구글', 0)
;

INSERT INTO department ( comp_id, dept_id, dept_nm, dept_status ) VALUES 
  (1000, 1, '경영지원팀', 0),
  (1000, 2, '영업팀', 0),
  (1000, 3, '개발팀', 0),
  (2000, 10, '1부서', 0),
  (2000, 20, '2부서', 0),
  (2000, 30, '3부서', 0),
  (2000, 40, '4부서', 0),
  (2000, 50, '5부서', 0),
  (3000, 1, '구글부서1', 0),
  (3000, 2, '구글부서2', 0),
  (3000, 3, '구글부서3', 0),
  (3000, 4, '구글부서4', 0),
  (3000, 5, '구글부서5', 0)
;

insert into ranks ( comp_id, rank_id, rank_nm, rank_level, rank_status ) values
  ( 1000, 0, '사원', 0, 0 ),
  ( 1000, 1, '주임', 0, 0 ),
  ( 1000, 2, '대리', 0, 0 ),
  ( 1000, 3, '과장', 0, 0 ),
  ( 1000, 4, '차장', 0, 0 ),
  ( 1000, 5, '팀장', 0, 0 ),
  ( 1000, 6, '부장', 0, 0 ),
  ( 1000, 7, '이사', 0, 0 ),
  ( 1000, 8, '이사장', 0, 0 ),
  ( 1000, 9, '대표이사', 0, 0 )

insert into users ( comp_id, dept_id, user_nm, user_pw, rank_id, user_email, user_dt, user_role, user_status ) values
  (1000, 1, '관리자', '111111', 0, 'admin@demo.com', '2000-01-01 00:00:00', 1, 0),
  (1000, 1, '경영지원팀1', '111111', 0, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 1, '경영지원팀2', '111111', 1, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 1, '경영지원팀3', '111111', 2, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 1, '경영지원팀4', '111111', 3, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 1, '경영지원팀5', '111111', 4, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 1, '경영지원팀6', '111111', 5, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 1, '경영지원팀7', '111111', 6, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 1, '경영지원팀8', '111111', 7, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 1, '경영지원팀9', '111111', 8, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 1, '경영지원팀10', '111111', 9, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀1', '111111', 0, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀2', '111111', 1, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀3', '111111', 2, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀4', '111111', 3, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀5', '111111', 4, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀6', '111111', 5, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀7', '111111', 6, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀8', '111111', 7, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀9', '111111', 8, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 2, '영업팀10', '111111', 9, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀1', '111111', 0, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀2', '111111', 1, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀3', '111111', 2, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀4', '111111', 3, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀5', '111111', 4, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀6', '111111', 5, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀7', '111111', 6, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀8', '111111', 7, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀9', '111111', 8, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0),
  (1000, 3, '개발팀10', '111111', 9, 'xxx@demo.com', '2000-01-01 00:00:00', 0, 0)
;


insert into templates ( comp_id, dept_id, tem_nm, tem_description, tem_contents, tem_status, create_id, create_comp_id, create_dept_id, create_dt ) values
  ( 1000, 1, '기안서1', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 1, '기안서2', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 1, '기안서3', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 1, '품의서', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 1, '지출결의서', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 1, '기타', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 2, '영업팀 기안서1', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 2, '영업팀 기안서2', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 2, '영업팀 기안서3', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 2, '영업팀 품의서', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 2, '영업팀 지출결의서', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 2, '영업팀 기타', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 3, '개발팀 기안서1', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 3, '개발팀 기안서2', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 3, '개발팀 기안서3', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 3, '개발팀 품의서', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 3, '개발팀 지출결의서', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' ),
  ( 1000, 3, '개발팀 기타', '기안 테스트 문서입니다.', '양식 내용 ( html 등 )', 0, 1, 1000, 1, '2000-01-01 00:00:00' )
;

insert into documents ( comp_id, dept_id, doc_id, create_id, create_comp_id, create_dept_id, doc_title, doc_contents, doc_status, create_dt, doc_secret ) values
  ( 1000, 1, '2025000001',  1, 1000, 1, '2025년도 기안 문서 1 (결재완료)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000002',  1, 1000, 1, '2025년도 기안 문서 2 (결재완료)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000003',  2, 1000, 1, '2025년도 기안 문서 3 (결재완료)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000004',  3, 1000, 1, '2025년도 기안 문서 4 (결재완료)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000005',  4, 1000, 1, '2025년도 기안 문서 5 (결재완료)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000006',  1, 1000, 1, '2025년도 기안 문서 6 (결재완료)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000007',  1, 1000, 1, '2025년도 기안 문서 7 (결재완료)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000008',  1, 1000, 1, '2025년도 기안 문서 8 (결재완료)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000009',  1, 1000, 1, '2025년도 기안 문서 1 (임시기안)', '문서 내용이 들어갈 자리입니다.', 000, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000010',  2, 1000, 1, '2025년도 기안 문서 2 (임시기안)', '문서 내용이 들어갈 자리입니다.', 000, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000011',  3, 1000, 1, '2025년도 기안 문서 3 (임시기안)', '문서 내용이 들어갈 자리입니다.', 000, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000012',  1, 1000, 1, '2025년도 기안 문서 4 (임시기안)', '문서 내용이 들어갈 자리입니다.', 000, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000013',  1, 1000, 1, '2025년도 기안 문서 1 (결재중)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000014',  2, 1000, 1, '2025년도 기안 문서 2 (결재중)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000015',  3, 1000, 1, '2025년도 기안 문서 3 (결재중)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000016',  1, 1000, 1, '2025년도 기안 문서 4 (결재중)', '문서 내용이 들어갈 자리입니다.', 200, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000017',  1, 1000, 1, '2025년도 기안 문서 1 (결재반려)', '문서 내용이 들어갈 자리입니다.', 400, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000018',  2, 1000, 1, '2025년도 기안 문서 2 (결재반려)', '문서 내용이 들어갈 자리입니다.', 400, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000019',  3, 1000, 1, '2025년도 기안 문서 3 (결재반려)', '문서 내용이 들어갈 자리입니다.', 400, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000020',  1, 1000, 1, '2025년도 기안 문서 4 (결재반려)', '문서 내용이 들어갈 자리입니다.', 400, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000021',  1, 1000, 1, '2025년도 기안 문서 1 (삭제)', '문서 내용이 들어갈 자리입니다.', 800, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000022',  2, 1000, 1, '2025년도 기안 문서 2 (삭제)', '문서 내용이 들어갈 자리입니다.', 800, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000023',  3, 1000, 1, '2025년도 기안 문서 3 (삭제)', '문서 내용이 들어갈 자리입니다.', 800, '2000-01-01 00:00:00', 0 ),
  ( 1000, 1, '2025000024',  1, 1000, 1, '2025년도 기안 문서 4 (삭제)', '문서 내용이 들어갈 자리입니다.', 800, '2000-01-01 00:00:00', 0 )
;


insert into signline ( doc_id, comp_id, dept_id, user_id, sign_no, sign_status, sign_dt ) values
  ( '2025000001', 1000, 1, 1, 1, 200, '2000-01-01 00:00:00' ),
  ( '2025000001', 1000, 1, 2, 2, 200, '2000-01-01 00:00:00' ),
  ( '2025000001', 1000, 1, 3, 3, 100, null ),
  ( '2025000001', 1000, 1, 4, 4, 000, null ),
  ( '2025000002', 1000, 1, 1, 1, 200, '2000-01-01 00:00:00' ),
  ( '2025000002', 1000, 1, 2, 2, 100, null ),
  ( '2025000002', 1000, 1, 3, 3, 000, null ),
  ( '2025000002', 1000, 1, 4, 4, 000, null ),
  ( '2025000003', 1000, 1, 1, 1, 000, null ),
  ( '2025000003', 1000, 1, 2, 2, 000, null ),
  ( '2025000003', 1000, 1, 3, 3, 000, null ),
  ( '2025000003', 1000, 1, 4, 4, 000, null ),
  ( '2025000004', 1000, 1, 7, 1, 200, '2000-01-01 00:00:00' ),
  ( '2025000004', 1000, 1, 8, 2, 200, '2000-01-01 00:00:00' ),
  ( '2025000004', 1000, 1, 9, 3, 100, null ),
  ( '2025000004', 1000, 1, 1, 4, 000, null ),
  ( '2025000005', 1000, 1, 5, 1, 200, '2000-01-01 00:00:00' ),
  ( '2025000005', 1000, 1, 6, 2, 100, null ),
  ( '2025000005', 1000, 1, 7, 3, 000, null ),
  ( '2025000005', 1000, 1, 8, 4, 000, null ),
  ( '2025000006', 1000, 1, 3, 1, 000, null ),
  ( '2025000006', 1000, 1, 4, 2, 000, null ),
  ( '2025000006', 1000, 1, 5, 3, 000, null ),
  ( '2025000006', 1000, 1, 6, 4, 000, null ),
  ( '2025000004', 1000, 2, 17, 1, 200, '2000-01-01 00:00:00' ),
  ( '2025000004', 1000, 2, 18, 2, 200, '2000-01-01 00:00:00' ),
  ( '2025000004', 1000, 2, 19, 3, 100, null ),
  ( '2025000004', 1000, 2, 11, 4, 000, null ),
  ( '2025000005', 1000, 2, 15, 1, 200, '2000-01-01 00:00:00' ),
  ( '2025000005', 1000, 2, 16, 2, 100, null ),
  ( '2025000005', 1000, 2, 17, 3, 000, null ),
  ( '2025000005', 1000, 2, 18, 4, 000, null ),
  ( '2025000006', 1000, 2, 13, 1, 000, null ),
  ( '2025000006', 1000, 2, 14, 2, 000, null ),
  ( '2025000006', 1000, 2, 15, 3, 000, null ),
  ( '2025000006', 1000, 2, 16, 4, 000, null )
;


CREATE INDEX idx_dept_id ON DEPARTMENT(dept_id);
commit;
